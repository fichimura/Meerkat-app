<% layout('layouts/boilerplate') %>
    <h2>All reviews of <%= audiovisual.title%>
    </h2>

    <% if(currentUser){ %>
        <div class="d-flex flex-row justify-content-end">
            <a class="btn btn-success" href="/audiovisuals/<%=audiovisual._id%>/reviews/new">New review of <%=
                    audiovisual.title %></a>
        </div>
        <% } %>
            <hr>

            <% for(let review of audiovisual.reviews) { %>
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title fw-bold">
                            <%= review.title %>
                        </h5>
                        <div class="d-flex flex-row card-subtitle mb-2 text-muted">
                            <span class="fw-bold">Author:</span>
                            <% if(review.author){ %>
                                <%= review.author.username %>
                                    <% }else {%>
                                        <span class="fw-light fst-italic">Review with no author</span>
                                        <%} %>
                        </div>
                        <div class="d-flex flex-row">
                            <span class="fw-bold">Rating:</span>
                            <%= review.rating %>
                        </div>
                        <div class="d-flex flex-row">
                            <span class="fw-bold">Date added:</span>
                            <%= review.date_added %>
                        </div>
                        <div class="d-flex flex-row">
                            <span class="fw-bold">Favorite:</span>
                            <% if(review.favorite) { %>
                                Yes
                                <% }else { %>
                                    No
                                    <% } %>
                        </div>

                        <a class="btn btn-primary mt-3"
                            href="/audiovisuals/<%= audiovisual._id %>/reviews/<%= review._id%>">See
                            review</a>
                    </div>
                </div>
                <% } %>